Title: Install and configure fogbow reverse tunnel
url: install-configure-reverse-tunnel
save_as: install-configure-reverse-tunnel.html
section: install-configure
index: 6

Install and configure reverse tunnel
==========

The reverse tunneling service provides public IP access to virtual machines created in the private cloud, even if the local cloud offers only private IPs to these virtual machines.

## Install from source
Get the latest code of the project.
``` shell
git clone https://github.com/fogbow/fogbow-reverse-tunnel.git
```
Then, install it
``` shell
mvn install 
```

## Install from debian package
Download to the <a href="http://downloads.fogbowcloud.org/nightly/debian/fogbow-reverse-tunnel/fogbow-reverse-tunnel_latest.deb" target=_blank>latest debian package</a>.
```bash
wget http://downloads.fogbowcloud.org/nightly/debian/fogbow-reverse-tunnel/fogbow-reverse-tunnel_latest.deb
```

Then, install it with dkpg
```bash
dpkg -i fogbow-reverse-tunnel_latest.deb
```

TODO: acho que precisamos especificar os diretorios em que o package será instalado (na verdade, onde estarão os arquivos de config)

## Configure
After the installation, rename the file ```reverse-tunnel.conf.example``` to ```reverse-tunnel.conf``` and edit its contents:
```bash
# Port to run the HTTP service of the Reverse Tunnel.
# The HTTP service handles request to create and get tunneled ports.
http_port=2223

# The reverse tunnel service employs multiple tunnel servers to balance the service load. The service allocates one port to each server. This property defines the range of servers' ports, thus the number of servers.
tunnel_port_range=2224:4224

# Number of ssh ports to be allocated in each server.
ports_per_ssh_server=5

# The range of public tunneled ports.
external_port_range=20000:30000

# Path to ssh key to be generated by the SSH Server.
host_key_path=hostkey.ser

# Expiration time to a tunnel port token
# A token is associated with the created tunneled ports. The token expires after not been used for idle_token_timeout seconds.
# After expiration, the port is reclaimed and can be used in another request.
idle_token_timeout=86400

# Period interval in seconds to verify token expiration
check_ssh_servers_interval=120
```

## Run
To start the reverse tunnel server, run the start-tunnel-server script inside ```./bin```.
``` shell
./bin/start-tunnel-server
```
