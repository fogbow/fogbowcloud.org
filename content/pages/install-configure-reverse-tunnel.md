Title: Install and configure Fogbow Reverse Tunnel
url: install-configure-reverse-tunnel
save_as: install-configure-reverse-tunnel.html
section: install
index: 2

Install and configure the Fogbow Reverse Tunnel
==========

The reverse tunneling service provides public IP access to virtual machines created in the private cloud, when the local cloud offers only private IPs to these virtual machines. The Fogbow Reverse Tunnel is distributed in two forms: as source code, or as a binary package for debian-based distributions. Choose the best distribution for your system, download it and install it as follows.

## Install from source
To get the lastest stable version of the component, download it from our repository:

``` shell
wget https://github.com/fogbow/fogbow-reverse-tunnel/archive/master.zip
```

Then, decompress it:
``` shell
unzip master.zip
```

Now, install it with Maven:

```
cd fogbow-reverse-tunnel-master
mvn install
```

## Install from debian package

Download a stable version from our <a href="http://downloads.fogbowcloud.org/stable/debian/">package repository</a> and install it with dpkg:

```bash
dpkg -i fogbow-reverse-tunnel_$version.deb
```

## Configure
After the installation, rename the file ```reverse-tunnel.conf.example``` to ```reverse-tunnel.conf``` and, if necessary, edit its contents. Below we list the default values:
```bash
http_port=2223
tunnel_port_range=2224:4224
ports_per_ssh_server=5
external_port_range=20000:30000
host_key_path=hostkey.ser
idle_token_timeout=86400
check_ssh_servers_interval=120
```

The ```http_port``` property defines the port used to run the HTTP service of the Reverse Tunnel. This service handles requests to create and get tunneled ports.

The reverse tunnel service employs multiple tunnel servers to balance the service load. The service allocates one port to each of these servers. The ```tunnel_port_range``` property defines the range of servers' ports. 

The ```ports_per_ssh_server``` property defines the number of ssh ports to be allocated in each server.

The ```external_port_range``` property defines the range of public tunneled ports.

The ```host_key_path``` property defines the path to ssh key to be generated by the SSH Server.

The ```idle_token_timeout``` property defines the expiration time of a tunnel port token. A token is associated with tunneled port each tunneled. The token expires if it is not used for the past ```idle_token_timeout``` seconds. After expiration, the port is reclaimed and can be used by another request.

The ```check_ssh_servers_interval``` propoerty defines the period interval in seconds to verify token expirations.

## Run
To start the reverse tunnel server, run the ```start-tunnel-server``` script inside ```./bin```.
``` shell
./bin/start-tunnel-server
```
